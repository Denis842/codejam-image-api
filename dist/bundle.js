!function(e){var t={};function n(l){if(t[l])return t[l].exports;var o=t[l]={i:l,l:!1,exports:{}};return e[l].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(l,o,function(t){return e[t]}.bind(null,o));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);const l=[["00BCD4","FFEB3B","FFEB3B","00BCD4"],["FFEB3B","FFC107","FFC107","FFEB3B"],["FFEB3B","FFC107","FFC107","FFEB3B"],["00BCD4","FFEB3B","FFEB3B","00BCD4"]],o=document.getElementById("canvas"),i=o.getContext("2d"),c=document.querySelector(".instruments--pencil"),a=document.querySelector(".instruments--fill"),r=document.querySelector(".paint--instruments"),s=document.querySelector(".prev--circle-current"),d=document.querySelector(".instruments--choose"),u=document.querySelector(".prev--circle-prev"),h=document.querySelectorAll(".change-color"),g=o.getBoundingClientRect(),f=document.getElementById("image-load"),m=document.getElementById("search"),v=document.getElementById("grayscale"),y=document.getElementById("change-canvas"),p=document.getElementById("error-image");let S=0;let w=!1,I=0,B=null,L=0;function E(e){const t=new Image;t.crossOrigin="Anonymous",function(n){if(null==n){const l=m.value;if(void 0===e){fetch(`https://api.unsplash.com/photos/random?query=town,${l}&client_id=0e3dc025f592841f70c2797320f3b1e21cf80e9126f46f70bf4d92ffec19fcee`).then(e=>e.json()).then(e=>{t.src=e.urls.small,localStorage.setItem(n,t.src)})}else{const l=e;fetch(l).then(()=>{t.src=l,localStorage.setItem(n,t.src)})}}}(),t.onload=()=>{if(i.clearRect(0,0,o.width,o.height),t.height===t.width)i.drawImage(t,0,0,o.width,o.width);else if(t.height<t.width){const e=512/t.width,n=(o.height*e-o.height)/2.5,l=(o.height/e-o.height)/2;e>1?i.drawImage(t,0,n,o.width,o.height/e):i.drawImage(t,0,l,o.width,o.height*e)}else if(t.height>t.width){const e=512/t.height,n=(o.width*e-o.width)/2,l=(o.width/e-o.width)/2.5;e>1?i.drawImage(t,n,0,o.width/e,o.height):i.drawImage(t,l,0,o.width*e,o.height)}},w=!0}function F(){if(o.width="128",o.height="128",S="4",I="32",null!=localStorage.getItem(o)){E(localStorage.getItem("undefined"))}else for(let e=0;e<+o.width;e+=1)for(let t=0;t<+o.height;t+=1){const n=Math.floor(t/o.width),c=Math.floor(e/o.height);i.fillStyle=`#${l[n][c]}`,i.fillRect(e,t,1,1)}}function b(e,t){const n=Math.floor(e/I)*I,l=Math.floor(t/I)*I;if(a.classList.contains("active"))return i.fillStyle=s.value,void i.fillRect(0,0,o.width,o.width);function c(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}if(d.classList.contains("active")){const e=i.getImageData(n,l,1,1),{data:t}=e;s.value=(r=t[0],u=t[1],h=t[2],`#${c(r)}${c(u)}${c(h)}`)}else{var r,u,h;i.imageSmoothingEnabled=!1,i.fillStyle=s.value,i.fillRect(n,l,I,I),localStorage.setItem(o,o.toDataURL())}}function C(){const e=r.querySelector(".active");e.classList.contains("instruments--pencil")?(o.addEventListener("mousedown",e=>{b((e.clientX-g.left)/S,(e.clientY-g.top)/S),o.onmousemove=e=>{b((e.clientX-g.left)/S,(e.clientY-g.top)/S)}}),o.addEventListener("mouseup",()=>{o.onmousemove=null})):e.classList.contains("instruments--fill")?o.addEventListener("click",e=>{b(e.clientX-g.left,e.clientY-g.top)}):e.classList.contains("instruments--choose")&&o.addEventListener("click",e=>{b((e.clientX-g.left)/S,(e.clientY-g.top)/S)})}F(),y.oninput=()=>{const e=y.value;L=localStorage.getItem("undefined"),localStorage.setItem(o,o.toDataURL()),"0"===e?(F(),E(L)):"1"===e?(o.width="256",o.height="256",S="2",I="8",E(L)):"2"===e&&(o.width="512",o.height="512",S="1",I="4",E(L))},document.addEventListener("keyup",e=>{switch(e.code){case"KeyB":for(let e=0;e<r.children.length;e+=1)r.children[e].classList.remove("active");a.classList.add("active"),C();break;case"KeyP":for(let e=0;e<r.children.length;e+=1)r.children[e].classList.remove("active");c.classList.add("active"),C();break;case"KeyC":for(let e=0;e<r.children.length;e+=1)r.children[e].classList.remove("active");d.classList.add("active"),C()}}),r.addEventListener("click",e=>{if("DIV"===e.target.tagName&&!e.target.classList.contains("active")){for(let e=0;e<r.children.length;e+=1)r.children[e].classList.remove("active");e.target.classList.add("active"),C()}}),s.oninput=()=>{null!==B?(u.style.backgroundColor=B,B=s.value,localStorage.setItem(u,B),localStorage.setItem(0,s.value)):B=s.value},document.addEventListener("DOMContentLoaded",()=>{null!=localStorage.getItem(u)&&(u.style.backgroundColor=localStorage.getItem(u)),null!=localStorage.getItem(0)&&(s.value=localStorage.getItem(0))}),h.forEach(e=>{e.addEventListener("click",e=>{let t=e.target.style.backgroundColor.split("(")[1].split(")")[0],n=(t=t.split(",")).map(e=>{const t=parseInt(e,10).toString(16);return 1===t.length?`0${t}`:t});n=`#${n.join("")}`,u.style.backgroundColor=s.value,localStorage.setItem(u,u.style.backgroundColor),s.value=n,localStorage.setItem(0,s.value)})}),f.onclick=()=>{E()},v.onclick=()=>{!1===w?(p.classList.add("active"),setTimeout(()=>p.classList.remove("active"),5e3)):function(){const e=i.getImageData(0,0,o.width,o.height),{data:t}=e;for(let e=0;e<t.length;e+=4){const n=(t[e]+t[e+1]+t[e+2])/3;t[e]=n,t[e+1]=n,t[e+2]=n}i.putImageData(e,0,0)}()}},function(e,t){}]);